<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hill Prairie Research - Driftless Region</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <div class="header">
        <h1>ðŸŒ¿ Hill Prairie Research - Driftless Region</h1>
        <p>Interactive visualization of remnant hill prairie connectivity, species distributions, and conservation priorities. Integrating machine learning models with citizen science data from iNaturalist and field research. Toggle between example data and actual research data to explore the full potential of this conservation tool.</p>
    </div>

    <div class="container">
        <div class="sidebar">
            <div class="control-group data-toggle">
                <h3>ðŸ”„ Data Source</h3>
                <div class="layer-control">
                    <input type="checkbox" id="show-example" checked>
                    <label for="show-example">Example/Demo Data</label>
                </div>
                <div class="layer-control">
                    <input type="checkbox" id="show-training">
                    <label for="show-training">ML Training Sites</label>
                </div>
                <div class="layer-control">
                    <input type="checkbox" id="show-validation">
                    <label for="show-validation">ML Validation Sites</label>
                </div>
                <div class="layer-control">
                    <input type="checkbox" id="show-inaturalist" checked>
                    <label for="show-inaturalist">iNaturalist Data</label>
                </div>
            </div>

            <div class="control-group">
                <h3>Map Layers</h3>
                <div class="layer-control">
                    <input type="checkbox" id="prairies" checked>
                    <label for="prairies">Hill Prairie Remnants</label>
                </div>
                <div class="layer-control">
                    <input type="checkbox" id="connectivity">
                    <label for="connectivity">Connectivity Corridors</label>
                </div>
                <div class="layer-control">
                    <input type="checkbox" id="species">
                    <label for="species">Species Observations</label>
                </div>
                <div class="layer-control">
                    <input type="checkbox" id="habitat">
                    <label for="habitat">Habitat Suitability</label>
                </div>
                <div class="layer-control">
                    <input type="checkbox" id="priority">
                    <label for="priority">Conservation Priority</label>
                </div>
            </div>

            <div class="control-group">
                <h3>Data Filters</h3>
                <label>Connectivity Score:</label>
                <input type="range" id="connectivity-filter" min="0" max="100" value="0" style="width: 100%; margin: 10px 0;">
                <div style="display: flex; justify-content: space-between; font-size: 0.9em; color: #666;">
                    <span>Low</span><span>High</span>
                </div>
                
                <label style="margin-top: 15px; display: block;">Species Richness:</label>
                <input type="range" id="species-filter" min="0" max="50" value="0" style="width: 100%; margin: 10px 0;">
                <div style="display: flex; justify-content: space-between; font-size: 0.9em; color: #666;">
                    <span>0</span><span>50+</span>
                </div>
            </div>

            <div class="legend">
                <h4>Data Sources</h4>
                <div class="legend-item">
                    <div class="legend-color example-marker"></div>
                    <span>Example/Demo Sites</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color training-marker"></div>
                    <span>ML Training Data</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color validation-marker"></div>
                    <span>ML Validation Data</span>
                </div>
                
                <h4 style="margin-top: 15px;">Prairie Quality</h4>
                <div class="legend-item">
                    <div class="legend-color habitat-excellent"></div>
                    <span>Excellent (>80%)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color habitat-good"></div>
                    <span>Good (60-80%)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color habitat-fair"></div>
                    <span>Fair (40-60%)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color habitat-poor"></div>
                    <span>Poor (<40%)</span>
                </div>
            </div>

            <div class="stats-panel">
                <h4>Study Area Summary</h4>
                <div class="stat-item">
                    <span>Prairie Remnants:</span>
                    <span class="stat-value" id="stat-prairies">Loading...</span>
                </div>
                <div class="stat-item">
                    <span>Total Area:</span>
                    <span class="stat-value" id="stat-area">Loading...</span>
                </div>
                <div class="stat-item">
                    <span>Species Observed:</span>
                    <span class="stat-value" id="stat-species">Loading...</span>
                </div>
                <div class="stat-item">
                    <span>iNaturalist Records:</span>
                    <span class="stat-value" id="stat-inaturalist">Loading...</span>
                </div>
            </div>

            <div class="control-group" style="background: #e8f5e8; border-left-color: #74ac00;">
                <h3>ðŸ”¬ Citizen Science Integration</h3>
                <div style="font-size: 0.9em; line-height: 1.5; color: #444; margin-bottom: 15px;">
                    <p><strong>iNaturalist</strong> is a global platform where anyone can record and share nature observations. This project integrates community-contributed data to enhance our understanding of prairie ecosystems.</p>
                    
                    <p style="margin-top: 10px;"><strong>How you can contribute:</strong></p>
                    <ul style="margin: 8px 0 0 20px; font-size: 0.85em;">
                        <li>Take photos of plants, animals, and fungi in prairie areas</li>
                        <li>Upload observations to help validate our ML models</li>
                        <li>Contribute to identifying new prairie remnants</li>
                        <li>Build a comprehensive species database for the Driftless region</li>
                    </ul>
                    
                    <p style="margin-top: 10px; font-weight: 500; color: #2c5530;">
                        Every observation helps improve conservation efforts and scientific understanding!
                    </p>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <a href="https://www.inaturalist.org/" target="_blank" style="
                        flex: 1;
                        display: block;
                        background: #74ac00;
                        color: white;
                        padding: 12px 15px;
                        text-decoration: none;
                        border-radius: 5px;
                        font-weight: bold;
                        font-size: 0.9em;
                        text-align: center;
                        transition: all 0.3s ease;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    " onmouseover="this.style.background='#5f8a00'; this.style.transform='translateY(-1px)'" 
                       onmouseout="this.style.background='#74ac00'; this.style.transform='translateY(0)'">
                        ðŸŒ± Visit iNaturalist
                    </a>
                </div>
                
                <div style="text-align: center; margin-top: 10px;">
                    <a href="https://www.inaturalist.org/projects/driftless-region-prairie-species" target="_blank" style="
                        display: inline-block;
                        font-size: 0.85em;
                        color: #2c5530;
                        text-decoration: none;
                        padding: 8px 12px;
                        background: rgba(44, 85, 48, 0.1);
                        border-radius: 15px;
                        transition: all 0.2s ease;
                    " onmouseover="this.style.background='rgba(44, 85, 48, 0.2)'" 
                       onmouseout="this.style.background='rgba(44, 85, 48, 0.1)'">
                        ðŸ”— Join our Driftless Prairie Project
                    </a>
                </div>
                
                <div style="margin-top: 15px; padding: 10px; background: rgba(116, 172, 0, 0.1); border-radius: 5px; border-left: 3px solid #74ac00;">
                    <div style="font-size: 0.8em; color: #555;">
                        <strong>Current Integration:</strong> This map displays {iNaturalist observations count} citizen science observations across the Driftless region, helping researchers identify biodiversity hotspots and validate habitat models.
                    </div>
                </div>
            </div>

            <div id="error-container"></div>
        </div>

        <div class="map-container">
            <div id="loading" class="loading-indicator" style="display: none;">
                <h4>Loading prairie data...</h4>
                <p>Fetching training features, validation data, and iNaturalist observations...</p>
            </div>
            <div id="map"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js"></script>
    <script src="js/layers.js"></script>
</body>
</html>
